<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>PTE – Arrange Paragraph (Part 3) | Modern English Australia</title>

<style>
:root{
  /* Page */
  --bg:#eef2f6;
  --card:#ffffff;
  --ink:#1e2933;
  --muted:#6b7280;

  /* Accent */
  --accent:#2f3031;
  --accent-soft:#e7f0ff;

  /* Lines & feedback */
  --line:#d9e0ea;
  --ok:#1db954;
  --err:#e74c3c;

  --radius:14px;
  --shadow:0 8px 24px rgba(30,41,59,.08);
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
  background:var(--bg);
  color:var(--ink);
  min-height:100vh;
  line-height:1.65;
  display:flex;
  flex-direction:column;
}

/* ===== Header (match Parts 1–2) ===== */
header{
  background:#0f2a44;
  color:#ffffff;
  text-align:center;
  padding:1.25rem 1rem;
  position:relative;
}
header h1{margin:0;font-size:1.25rem;font-weight:900;}
header span{
  background:none;
  color:#ffffff;
  padding:0;
  border-radius:0;
  margin-right:6px;
  font-weight:900;
}
#timer{
  position:absolute;
  right:1rem;
  top:1rem;
  background:var(--accent);
  color:#ffffff;
  padding:.4rem .75rem;
  border-radius:8px;
  font-weight:900;
}

/* ===== Main ===== */
main{
  flex:1;
  width:min(900px,100%);
  margin:1.75rem auto;
  padding:0 1rem;
}
.instructions{
  text-align:center;
  color:var(--muted);
  margin-bottom:1.2rem;
  background:var(--accent-soft);
  padding:.75rem 1rem;
  border-radius:10px;
}

/* ===== Controls ===== */
.controls{
  display:flex;
  gap:.75rem;
  justify-content:center;
  flex-wrap:wrap;
  margin:0 0 1.2rem;
}
.btn{
  padding:.85rem 1.35rem;
  border-radius:12px;
  border:1px solid transparent;
  font-weight:900;
  cursor:pointer;
  background:var(--accent);
  color:#ffffff;
}
.btn.secondary{
  background:#ffffff;
  color:var(--accent);
  border-color:var(--accent);
}
.btn:disabled{
  opacity:.55;
  cursor:not-allowed;
}

/* ===== Cards ===== */
.card{
  background:var(--card);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:1.1rem;
  border:1px solid var(--line);
  margin-bottom:1.1rem;
}
.card h2{
  margin:0 0 .8rem;
  text-align:center;
  color:var(--accent);
  font-size:1.1rem;
}

/* ===== Paragraph build ===== */
.built{
  display:flex;
  flex-direction:column;
  gap:.8rem;
}
.sentence{
  background:#f8fafc;
  border:1px solid var(--line);
  border-radius:10px;
  padding:.95rem 1rem;
  color:var(--ink);
}

/* ===== Options ===== */
.options{
  display:flex;
  flex-direction:column;
  gap:.8rem;
}
.option{
  background:#f4f7fb;
  border:1px solid var(--line);
  border-radius:10px;
  padding:.95rem 1rem;
  cursor:pointer;
  color:var(--ink);
  transition:transform .12s ease, background .2s ease;
}
.option:hover{
  background:var(--accent-soft);
  transform:scale(1.01);
}

/* ===== Feedback ===== */
.feedback{
  text-align:center;
  font-weight:900;
  margin-top:.9rem;
}
.correct{color:var(--ok);}
.incorrect{color:var(--err);}

/* ===== Bottom Navigation ===== */
.nav-links{
  display:flex;
  justify-content:center;
  gap:.75rem;
  flex-wrap:wrap;
  margin:1.8rem 0 .5rem;
}
.nav-links a{
  text-decoration:none;
  font-weight:900;
  padding:.75rem 1.4rem;
  border-radius:10px;
  background:#ffffff;
  color:var(--accent);
  border:1px solid var(--line);
  transition:all .2s ease;
}
.nav-links a:hover{
  background:var(--accent);
  color:#ffffff;
}

/* ===== Footer ===== */
footer{
  background:#f4f7fb;
  color:var(--muted);
  text-align:center;
  padding:1rem;
  border-top:1px solid var(--line);
}
footer span{color:var(--accent);font-weight:900;}
</style>
</head>

<body>

<header>
  <h1><span>Modern English AU</span> PTE – Arrange Paragraph (Part 3)</h1>
  <div id="timer">03:00</div>
</header>

<main>
  <p class="instructions">
    Select the sentence that logically comes <strong>next</strong>. Use <strong>Undo</strong> if you change your mind.
  </p>

  <div class="controls">
    <button class="btn secondary" id="undoBtn" type="button" disabled>Undo</button>
    <button class="btn secondary" id="resetBtn" type="button">Start again</button>
    <button class="btn" id="checkBtn" type="button" disabled>Check Answers</button>
  </div>

  <div class="card">
    <h2>Your Paragraph</h2>
    <div id="built" class="built"></div>
  </div>

  <div class="card">
    <h2>Choose the Next Sentence</h2>
    <div id="options" class="options"></div>
  </div>

  <div id="feedback" class="feedback"></div>

  <div class="nav-links">
    <a href="ArrangeParagraphTechTheme.html">Home</a>
    <a href="Part1ArrangeParagraphTechTheme.html">Part 1</a>
    <a href="Part2ArrangeParagraphTechTheme.html">Part 2</a>
 
  </div>
</main>

<footer>
  © <span>Koala Spies Sydney</span> · Modern English Australia · All Rights Reserved
</footer>

<script>

// ===== Correct Order =====
const sentences = [
 "Children’s exposure to social media has reshaped how they communicate, learn, and perceive themselves.",
 "While it can foster creativity and connection, it also introduces risks such as cyberbullying, unrealistic comparisons, and reduced attention spans.",
 "Navigating these platforms requires guidance, boundaries, and digital literacy to ensure healthy development."
];

// ===== STATE =====
let built = [];
let remaining = [];
let history = [];

// ===== DOM =====
const builtEl = document.getElementById("built");
const optionsEl = document.getElementById("options");
const feedback = document.getElementById("feedback");
const checkBtn = document.getElementById("checkBtn");
const undoBtn = document.getElementById("undoBtn");
const resetBtn = document.getElementById("resetBtn");

// ===== INIT =====
startAgain();

function startAgain(){
  built = [];
  remaining = sentences.slice();
  history = [];
  feedback.innerHTML = "";
  checkBtn.disabled = true;
  undoBtn.disabled = true;
  renderBuilt();
  renderOptions();
}

// ===== RENDER =====
function renderBuilt(){
  builtEl.innerHTML = "";

  if(built.length === 0){
    builtEl.innerHTML = "<p style='color:var(--muted);text-align:center'>Choose the first sentence</p>";
    return;
  }

  built.forEach(s => {
    const div = document.createElement("div");
    div.className = "sentence";
    div.textContent = s;
    builtEl.appendChild(div);
  });
}

function renderOptions(){
  optionsEl.innerHTML = "";

  if(remaining.length === 0){
    optionsEl.innerHTML = "<p style='text-align:center;color:var(--muted)'>All sentences placed.</p>";
    checkBtn.disabled = false;
    return;
  }

  shuffle([...remaining]).forEach(text => {
    const div = document.createElement("div");
    div.className = "option";
    div.textContent = text;
    div.addEventListener("click", () => choose(text));
    optionsEl.appendChild(div);
  });

  checkBtn.disabled = true;
}

// ===== ACTIONS =====
function choose(text){
  built.push(text);
  remaining = remaining.filter(s => s !== text);
  history.push(text);

  feedback.innerHTML = "";
  renderBuilt();
  renderOptions();

  undoBtn.disabled = history.length === 0;
}

function undo(){
  if(history.length === 0) return;

  const last = history.pop();

  built.pop();
  remaining.push(last);

  feedback.innerHTML = "";
  checkBtn.disabled = true;
  undoBtn.disabled = history.length === 0;

  renderBuilt();
  renderOptions();
}

// ===== HELPERS =====
function shuffle(arr){
  return arr.sort(() => Math.random() - 0.5);
}

// ===== Scoring (2 adjacent links) =====
function checkAnswers(){
  let score = 0;
  for(let i=0;i<sentences.length-1;i++){
    const a = built.indexOf(sentences[i]);
    const b = built.indexOf(sentences[i+1]);
    if(a > -1 && b - a === 1) score++;
  }

  feedback.innerHTML = score === 2
    ? `<span class="correct">Perfect! You scored ${score}/2 – both links correct.</span>`
    : `<span class="incorrect">You scored ${score}/2 correct links.</span>`;

  localStorage.setItem("PTE_Part3_Score", score);
}

// ===== EVENTS =====
undoBtn.addEventListener("click", undo);
resetBtn.addEventListener("click", startAgain);
checkBtn.addEventListener("click", checkAnswers);

// ===== 3-Minute Timer =====
let timeLeft = 3 * 60;
const timerDisplay = document.getElementById("timer");
const countdown = setInterval(() => {
  const m = Math.floor(timeLeft / 60);
  const s = timeLeft % 60;
  timerDisplay.textContent = `${String(m).padStart(2,"0")}:${String(s).padStart(2,"0")}`;

  if(timeLeft <= 0){
    clearInterval(countdown);
    timerDisplay.textContent = "00:00";
    checkBtn.disabled = true;
    undoBtn.disabled = true;
    resetBtn.disabled = true;
    feedback.innerHTML = `<span class="incorrect">Time’s up! You can no longer submit.</span>`;
  }
  timeLeft--;
}, 1000);
</script>

</body>
</html>
